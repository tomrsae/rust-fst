Rust macro-based finite state machines
